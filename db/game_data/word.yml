- name: 戦闘値
  caption: |-
    戦闘中にキャラクターが所持する数値化可能な値
    戦闘値一覧

- name: 戦闘値割合
  caption: |-
    戦闘値の現在値を戦闘値の最大値で割った数値。
    ただし、マイナスにもなりうる。

- name: 戦闘値割合例
  caption: |-
    HP割合
    　HPを最大HPで割った値。
    　HPが-500、最大HPが1000の場合、HP割合は-0.5となる。

- name: 戦闘値一覧
  caption: |-
    HP、最大HP、MP、最大MP
    AT、MAT、DF、MDF
    HIT、MHIT、EVA、MEVA
    SPD、CRI
    射程、隊列、異常深度
    属性特性、属性耐性
    異常特性、異常耐性

- name: 属性
  caption: |-
    属性とは何ぞやの説明。
    
    属性一覧

- name: 属性一覧
  caption: |-
    無、火、水、地、風、光、闇

- name: 状態異常
  caption: |-
    状態異常とは何ぞやの説明。
    
    状態異常一覧

- name: 状態異常一覧
  caption: |-
    猛毒、麻痺、睡眠、泥浸、水濡
    炎纏、鎌鼬、光身、暗幕、混濁

- name: キャラクター
  caption: |-
    キャラクター種に分類される。

- name: キャラクター種
  caption: |-
    PC、NPC、モンスター、召喚、人形、竜など。

- name: キャラクター名
  caption: |-
    キャラクター種ごとに固有の名前。
    ただしPCのキャラクター名だけは固有とは限らない。

- name: 特殊効果
  caption: |-
    特殊効果種に分類される

- name: 特殊効果種
  caption: |-
    技、付加、アビリティ

- name: 特殊効果内容
  caption: |-
    1つ以上の効果で構成される特殊効果の内容。
    対象が指定された効果が行頭に来なくてはならない
    
    特殊効果内容例

- name: 特殊効果内容例
  caption: |-
    敵ラ/物理攻撃(1.0)×10:回避停止
    　ランダムに敵を選択して通常攻撃と同じダメージで物理攻撃を行い、これを10回繰り返す。
    　途中で攻撃が外れた場合には、その時点で技を停止する。
    自/[HP50％以下]HP回復(最大HP×0.3):HP回復(最大HP×0.1)
    　自分のHPが最大HPの50%以下の場合、自分の最大HPに0.3かけた値だけ、自分のHPを回復する。
    　そうでない場合、自分の最大HPに0.1かけた値だけ、自分のHPを回復する。
    敵全/{物理攻撃(0.2)⇒魔法攻撃(0.2)}
    自/HP回復(ダメージ合計×0.5)
    　敵全体に通常攻撃ダメージに0.2をかけたダメージで物理攻撃を行い、
    　命中した場合はさらに通常攻撃ダメージに0.2をかけたダメージで魔法攻撃を行う。
    　最後に与えた全ダメージの合計に0.5をかけた数値分自分のHPを回復する。

- name: 計算値
  caption: |-
    計算可能量を＋たり×たりした数値
    
    計算値例

- name: 計算値例
  caption: |-
    最大HP×0.1×LV＋50×LV

- name: 計算可能量
  caption: |-
    戦闘値、戦闘値割合
    戦闘値合計、戦闘値平均
    戦闘値最小、戦闘値最大
    特殊効果LV、数値、乱数など

- name: 戦闘値合計
  caption: |-
    複数キャラクターの戦闘値の合計
    
    戦闘値合計例

- name: 戦闘値合計例
  caption: |-
    味HP合計
    　味方全員のHPの合計値

- name: 戦闘値平均
  caption: |-
    複数キャラクターの戦闘値の平均
    
    戦闘値平均例

- name: 戦闘値平均例
  caption: |-
    味HP平均
    　味方全員のHPの平均値

- name: 戦闘値最小
  caption: |-
    複数キャラクターの戦闘値の最小
    
    戦闘値最小例

- name: 戦闘値最小例
  caption: |-
    味HP合計
    　味方全員のHPの最小値

- name: 戦闘値最大
  caption: |-
    複数キャラクターの戦闘値の最大
    
    戦闘値最大例

- name: 戦闘値最大例
  caption: |-
    味HP最大
    　味方全員のHPの最大値

- name: 数値
  caption: |-
    正の実数

- name: 乱数
  caption: |-
    数値～数値
    などと範囲を指定できるランダムな数
    
    乱数例

- name: 乱数例
  caption: |-
    1～50

- name: 特殊効果LV
  caption: |-
    特殊効果が所持する正の整数
    計算値の中では「LV」と表記される

- name: 対象
  caption: |-
    所属と範囲を組み合わせて指定する。
    ただし、自分を指定する時は所属だけでよい。
    また、所属と範囲の間に種別を組み合わせて指定することもできる。
    
    対象例

- name: 対象例
  caption: |-
    自
    　自分を対象とする。
    自竜
    　自分の竜を対象とする。
    敵全
    　敵の全てを対象とする。
    味召喚単
    　味方に召喚されたもののうち一体を対象とする。
    自以外敵味ラ
    　自分以外の敵と味方の両方から、ランダムで対象が決定される。

- name: 所属
  caption: |-
    敵、味、自

- name: 種別
  caption: |-
    召喚、人形、竜

- name: 範囲
  caption: |-
    単、ラ、全、範囲追尾

- name: 範囲追尾
  caption: |-
    高戦闘値追尾、低戦闘値追尾
    
    範囲追尾例

- name: 範囲追尾例
  caption: |-
    低HP追尾
    　所属のうち一番HPが低いものを範囲とする。
    高麻痺追尾
    　所属のうち一番麻痺深度が高いものを範囲とする。

- name: 効果
  caption: |-
    対象、発動条件、効果種、停止条件から構成される。
    「＋」や「⇒」や「|」などの効果演算子でつなぐことができる。
    また反復演算子「×」で繰り返し回数を指定することもできる。
    
    効果例

- name: 効果例
  caption: |-
    敵ラ/物理攻撃(0.2)×3
    　敵ランダムに通常攻撃ダメージに0.2をかけたダメージで、物理攻撃を3回行う。
    　敵ラ=対象、物理攻撃(0.2)=効果種、×=反復演算子、3=反復数
    魔法攻撃(0.5)＋物理攻撃(0.5)
    　通常攻撃ダメージに0.5をかけたダメージで、対象に魔法攻撃を行う。
    　その後、通常攻撃ダメージに0.5をかけたダメージで対象に物理攻撃を行う。
    　魔法攻撃(0.5)=効果種、＋=効果演算子、物理攻撃(0.5)=効果種
    {純物魔攻撃(0.5)⇒麻痺軽減(1)}×10：麻痺深度1以上
    　通常攻撃ダメージに0.5をかけたダメージで、対象に純物魔攻撃を行う。
    　攻撃が命中した場合はさらに麻痺を深度1軽減する。
    　以上を麻痺深度が1以上の間、最大10回繰り返し行う。
    　純物魔攻撃(0.5)=効果種、⇒=効果演算子、麻痺軽減(1)=効果種、×=反復演算子、10=反復数

- name: 効果演算子
  caption: |-
    効果同士を繋ぐ演算子。
    
    効果演算子一覧

- name: 効果演算子一覧
  caption: |-
    効果Ａ＋効果Ｂ
    　効果Ａのあとに効果Ｂを発動。
    効果Ａ｜効果Ｂ
    　効果Ａまたは効果Ｂを発動。
    効果Ａ⇒効果Ｂ
    　効果Ａがうまく行った場合に効果Ｂが発動。
    効果Ａ＋[直前攻撃命中または直前異常追加または直前効果成功]効果Ｂ
    　上に同じ。上はこれの省略形。

- name: 反復演算子
  caption: |-
    効果と反復数を繋ぐ演算子。
    
    反復演算子例

- name: 反復演算子例
  caption: |-
    効果Ａ×(自分HP×0.1)
    　自分のHPに0.1をかけた回数だけ効果Ａを繰り返す。

- name: 反復数
  caption: |-
    反復の回数を表す。計算値を切り捨てて正の整数にしたもの。

- name : 効果種
  caption: |-
    それ以上分割できない効果の最小単位
    効果種によっては計算値などパラメータの指定も必要
    
    効果種例
    効果種一覧

- name : 効果種例
  caption: |-
    物理攻撃(1.0)
    　通常攻撃ダメージに1.0をかけたダメージで、対象に物理攻撃を行う。

- name: 停止条件
  caption: |-
    効果種の発動後毎にチェックされる条件
    効果条件を満たしていない場合は効果を停止する
    
    停止条件例

- name: 停止条件例
  caption: |-
    効果Ａ：効果条件
    　効果条件が満たされていない場合効果Ａを途中で停止する。
    効果Ａ：特殊停止条件
    　特殊停止条件に応じて効果Ａが途中で停止する。
    
    特殊停止条件一覧

- name: 特殊停止条件
  caption: |-
    停止条件の指定時のみ使える特殊な効果条件
    特殊停止条件一覧

- name: 特殊停止条件一覧
  caption: |-
    回避停止、命中停止
    抵抗停止、追加停止

- name: 回避停止
  caption: |-
    攻撃を回避されたら効果を中止する

- name: 命中停止
  caption: |-
    攻撃が命中したら効果を中止する

- name: 抵抗停止
  caption: |-
    状態異常を抵抗されたら効果を中止する

- name: 追加停止
  caption: |-
    状態異常を追加したら効果を中止する

- name: 発動条件
  caption: |-
    効果の発動前にチェックされる条件。
    効果条件を括弧で囲み指定する。
    
    発動条件例

- name: 発動条件例
  caption: |-
    [効果条件]効果Ａ
    　効果条件が満たされた場合のみ効果Ａが発動する。
    [効果条件]効果Ａ：効果Ｂ
    　効果条件が満たされた場合効果Ａが発動し、
    　効果条件が満たされない場合は効果Ｂが発動する。

- name: 効果条件
  caption: |-
    真偽条件、比較条件から構成される条件。
    「かつ」や「または」などの条件演算子でつなぐことができる。
    
    効果条件例
    真偽条件一覧
    比較条件一覧

- name: 効果条件例
  caption: |-
    直前攻撃命中かつ直前ダメージが100以上
    　直前の攻撃が命中して、かつ与えたダメージが100以上のとき
    自分HP50%以下かつ対象HP50%以上
    　自分のHPが最大HPの50%以下でかつ対象のHPが最大HPの50%以上のとき。

- name: 条件演算子
  caption: |-
    効果条件同士を繋ぐ演算子
    
    条件演算子例

- name: 条件演算子例
  caption: |-
    効果条件Ａかつ効果条件Ｂ
    　効果条件Ａが満たされてかつＢも満たされたとき
    効果条件Ａまたは効果条件Ｂ
    　効果条件Ａが満たされるかまたはＢが満たされたとき

- name: 真偽条件
  caption: |-
    成功か失敗の2択で表される条件。
    真偽条件一覧

- name: 真偽条件一覧
  caption: |-
    直前攻撃命中、直前攻撃空振
    直前異常追加、直前異常抵抗
    直前効果成功、直前効果失敗

- name: 比較条件
  caption: |-
    2つの計算値を比較することで表される条件。
    
    比較条件例
    比較条件一覧

- name: 比較条件例
  caption: |-
    HP減少合計が101以上
    　減少により変化したHPの合計値が101以上のとき
    味HP50％以下
    　味方のうち誰かのHPが最大HPの50％以下のとき
    味HPが敵HP平均以下
    　味方のうち誰かのHPが敵全体の平均HP以下のとき

- name: 比較条件一覧
  caption: |-
    比較可能量Ａが比較可能量Ｂ以上
    比較可能量Ａが比較可能量Ｂ以下
    比較可能量Ａが比較可能量Ｂ

- name: 比較可能量
  caption: |-
    計算値、複数キャラクターの戦闘値または戦闘値割合
    比較可能量は複数要素を持つ集合の場合もある。
    集合同士の比較を行った場合、全組み合わせの比較を行い
    1つでも真ならその比較は真とする
    
    比較可能量例

- name: 比較可能量例
  caption: |-
    敵HP
    　敵のHPの集合
    味MP割合平均
    　味方全体の最大MPに対するMPの割合の平均値

- name: 直前攻撃命中
  caption: |-
    直前の攻撃が命中したとき。

- name: 直前攻撃空振
  caption: |-
    直前の攻撃を空振りしたとき。

- name: 直前異常追加
  caption: |-
    直前の状態異常の追加したとき。

- name: 直前異常抵抗
  caption: |-
    直前の状態異常を抵抗されたとき。

- name: 直前効果成功
  caption: |-
    直前の効果が成功したとき。

- name: 直前効果失敗
  caption: |-
    直前の効果が失敗したとき。

- name: 効果種一覧
  caption: |-
    攻撃、蘇生、特殊効果消滅、特殊効果追加
    異常追加、異常軽減、異常防御
    増加、減少、上昇、低下、変換
    回復、強制中断、消費増加、消費減少
    召喚、セリフ、次の攻撃属性変化
    次のダメージ変化、次の命中変化
    反射、奪取、強奪
    次の行動変化、次の追加行動変化
    次のステータス変化

- name: セリフ
  caption: |-
    "任意の文字列"
    の形で記述され任意の文字列を表示する。
    
    セリフ例

- name: セリフ例
  caption: |-
    "条件を満たしていない！"
    　「条件を満たしていない！」と表示される。

- name: 回復
  caption: |-
    HP回復(計算値)
    MP回復(計算値)
    
    回復例

- name: 回復例
  caption: |-
    HP回復(最大HP×LV×0.05)
    　対象のHPを最大HP×LV×0.05だけ回復する。

- name: 攻撃
  caption: |-
    属性攻撃種別攻撃(計算値)
    の形で記述され(通常攻撃ダメージ×計算値)のダメージを与える。
    また先頭に「固定」とつけると計算値分のダメージを与える。
    
    攻撃例

- name: 攻撃例
  caption: |-
    火属性SW物魔攻撃(1.0)
    　火属性の物理攻撃か魔法攻撃のうちダメージの大きなほう
    固定魔法攻撃(1000)
    　1000の固定魔法ダメージを与える。

- name: 通常攻撃
  caption: |-
    様々な攻撃の基準となる攻撃

- name: 通常攻撃ダメージ
  caption: |-
    戦闘値によって決定される通常攻撃のダメージ

- name: 攻撃種別
  caption: |-
    物理、魔法、純物魔、SW物魔

- name: 物理
  caption: |-
    攻撃側のAT、HITと防御側のDF、EVAに依存。

- name: 魔法
  caption: |-
    攻撃側のMAT、MHITと防御側のMDF、MEVAに依存。

- name: 純物魔
  caption: |-
    攻撃側のMAT、MHIT、MAT、MHITと防御側のMDF、MEVA、MDF、MEVAに依存。

- name: SW物魔
  caption: |-
    物理もしくは魔法の与えるダメージが大きいほうに切り替わる。

- name: 蘇生
  caption: |-
    蘇生(計算値)
    の形で記述され計算値分のHPで墓地から抜け出す。
    
    蘇生例

- name: 蘇生例
  caption: |-
    蘇生(最大HP×0.1)

- name: 特殊効果消滅
  caption: |-
    [付加]付加名消滅
    [技]技名の設定消滅
    の形で記述され名前で指定された特殊効果が1つ消滅する。
    付加の場合は「全て消滅」とすることで全て消滅。
    付加消滅、技設定消滅
    とすると発動中の特殊効果自身が消滅する。
    
    特殊効果消滅例

- name: 特殊効果消滅例
  caption: |-
    [付加]攻撃LV2消滅

- name: 特殊効果追加
  caption: |-
    [付加]付加名LV特殊効果LV
    の形で記述され名前で指定された特殊効果を1つ追加する。
    末尾に「(重複不可)」とつけると発動中の特殊効果での複数回追加は不可。
    また特殊効果LVの入力は必須ではない。
    
    特殊効果追加例

- name: 特殊効果追加例
  caption: |-
    [付加]拒絶(重複不可)
    　拒絶と言う名前の負荷を重複不可で追加する。

- name: 付加名
  caption: |-
    付加毎に固有の名前

- name: 技名
  caption: |-
    技毎に固有の名前

- name: アビリティ名
  caption: |-
    アビリティ毎に固有の名前

- name: 異常追加
  caption: |-
    状態異常(計算値)
    の形で記述され計算値分の状態異常を追加する。
    
    異常追加例

- name: 異常追加例
  caption: |-
    猛毒(LV)
    　特殊効果LV分の猛毒の追加を試みる。

- name: 異常軽減
  caption: |-
    状態異常軽減(計算値)
    の形で記述され計算値分の状態異常を軽減する。
    
    異常軽減例

- name: 異常軽減例
  caption: |-
    麻痺軽減(2)
    　麻痺深度を2軽減する。

- name: 強制中断
  caption: |-
    特殊効果種強制中断
    の形で記述され特殊効果を中断する。
    
    技強制中断例

- name: 技強制中断例
  caption: |-
    技強制中断
    　親効果が技だった場合に強制中断する。

- name: PT編成定義
  caption: |-
    定義されたキャラクターでPTを編成する。
    定義されていないキャラクターは通常攻撃のみ行う。
    
    キャラクター定義(省略可能)
    [PT]PT名
    [キャラクター種]キャラクター名
    
    PT編成定義例

- name: PT名
  caption: |-
    PTに付けられたラベル。
    固有の名前じゃなくても良いです。

- name: PT編成定義例
  caption: |-
    [PT]Aチーム
    [モンスター]キュアプルプル
    [モンスター]ピコピコテール
    
    [PT]Bチーム
    [モンスター]酔いどれドラゴン
    [モンスター]週末を告げる梟

- name: キャラクター定義
  caption: |-
    [キャラクター種]キャラクター名
    特殊効果定義(省略可能)
    特殊効果設定
    
    キャラクター定義例

- name: キャラクター定義例
  caption: |-
    [モンスター]キュアプルプル
    [付加]防御LV1
    [付加]魔防LV1
    [付加]安穏LV1
    [技]アイススラッシュ
    優先度1：50％
    [技]スタードロップ
    優先度1：50％

- name: 特殊効果定義
  caption: |-
    アビリティ定義、付加定義、技定義の総称

- name: 特殊効果設定
  caption: |-
    アビリティ設定、付加設定、技設定の総称

- name: アビリティ設定
  caption: |-
    [アビリティ]アビリティ名LVアビリティLV
    
    アビリティ設定例

- name: アビリティ設定例
  caption: |-
    [アビリティ]叫喚地獄LV30

- name: 付加設定
  caption: |-
    [付加]付加名LV付加LV
    
    付加設定例

- name: 付加設定例
  caption: |-
    [付加]安穏LV1

- name: 技設定
  caption: |-
    [技]技名
    優先度:効果条件
    対象：対象指定条件(省略可能)
    
    技設定例

- name: 技設定例
  caption: |-
    [技]グランドアロー
    優先度2：50％
    対象：後列

- name: 使用条件
  caption: |-
    技を使用する条件

- name: 対象指定
  caption: |-
    技の対象を指定する

- name: 特定タイミング発動特殊効果内容
  caption: |-
    [特殊効果発動タイミング]特殊効果発動条件
    特殊効果内容
    
    特定タイミング発動特殊効果内容例

- name: 特定タイミング発動特殊効果内容例
  caption: |-
    [ターン前]100％
    自/MP回復(最大MP×0.03×LV+15×LV)

- name: 特殊効果発動条件
  caption: |-
    効果条件。

- name: 特殊効果発動タイミング
  caption: |-
    特殊効果発動シーン一覧の前後
    
    特殊効果発動タイミング例

- name: 特殊効果発動タイミング例
  caption: |-
    ターン前
    攻撃命中後

- name: 特殊効果発動シーン一覧
  caption: |-
    戦闘
    フェイズ
    ターン
    行動
    追加行動
    通常攻撃
    効果
    対象決定
    攻撃命中
    攻撃被弾
    攻撃空振
    攻撃回避
    攻撃
    被攻撃
    クリティカル
    被クリティカル
    墓地埋葬

- name: アビリティ定義
  caption: |-
    [アビリティ]アビリティ名
    --------------
    アビリティ説明
    --------------
    アビリティ効果内容
    
    LV発現LV：LV効果説明
    LV効果内容
    
    アビリティ定義例

- name: アビリティ定義例
  caption: |-
    [アビリティ]叫喚地獄
    --------------------------------------------------------------------
    敵を闇に葬りそうな技能です。
    LVが高いほど闇属性特性/耐性が増加し、LVによっては特殊な効果も得られます。
    --------------------------------------------------------------------
    [戦闘前]100％
    自/{闇特性増加(LV)＋闇耐性増加(LV)}
    
    LV10：物理攻撃によってダメージを与えた後、攻撃対象のHPが0以下ならHPを減少させます。
    [物理攻撃命中後]対象HPが0以下
    敵単/HP減少(最大HP×0.025)
    
    LV20：物理攻撃によってダメージを与えた後、攻撃対象のMPが0ならHPを減少させます。
    [物理攻撃命中後]対象MPが0
    敵単/HP減少(最大HP×0.04＋80)
    
    LV30：物理攻撃によってダメージを与えた後、攻撃対象のMPを減少させます。
    [物理攻撃命中後]100％
    敵単/MP減少(最大MP×0.015)

- name: アビリティ説明
  caption: |-
    アビリティの説明。任意の文字列。

- name: アビリティLV
  caption: |-
    アビリティの特殊効果LV。

- name: 付加LV
  caption: |-
    付加の特殊効果LV。

- name: アビリティ効果
  caption: |-
    アビリティを習得することにより得られる効果。
    アビリティLVに応じて効果量が上がったりする。

- name: アビリティ効果内容
  caption: |-
    アビリティ効果の内容。特定タイミング発動特殊効果内容から構成される。

- name: LV効果説明
  caption: |-
    LV効果の説明。任意の文字列。

- name: LV効果
  caption: |-
    アビリティLVが発現LV以上のときLV効果が発現する。

- name: LV効果内容
  caption: |-
    LV効果の内容。特定タイミング発動特殊効果内容から構成される。

- name: 発現LV
  caption: |-
    LV効果が発現するLV。正の整数。

- name: 付加定義
  caption: |-
    [付加]付加名
    特定タイミング発動特殊効果内容
    
    付加定義例

- name: 付加定義例
  caption: |-
    [付加]安穏
    [ターン前]100％
    自/MP回復(最大MP×0.03×LV+15×LV)

- name: 技定義
  caption: |-
    [技]技名/消費/必須/遠/対
    ------------------
    付加定義(省略可能)
    ------------------
    特殊効果内容
    
    技定義例

- name: 技定義例
  caption: |-
    [技]アイススラッシュ/50/剣
    敵単/水属性純物魔攻撃(1.5/30％～95％)
    
    [技]スタードロップ/60/魔石/遠/対
    ------------------------
    [付加]星癒
    [攻撃被弾後]100％
    自/HP回復(最大HP×0.1＋100)
    ------------------------
    味低HP追尾/{[付加]星癒(重複不可)＋光耐性増加(光耐性×0.02)}

- name: 消費
  caption: |-
    技の消費。0以上の整数。

- name: 必須
  caption: |-
    技の必須装備。

- name: 必須装備
  caption: |-
    必須な装備。

- name: 優先度
  caption: |-
    優先の度合い。

- name: 戦闘設定
  caption: |-
    優先度順に使用条件と頻度の判定が行われ、
    判定が成功したら技が発動する。
    優先度が同じ設定の判定順序はランダム。
    
    ただし、必須装備を満たしていない設定や
    現在MPが技の消費MPより少ない設定は無視される。
    
    戦闘設定例

- name: 戦闘設定例
  caption: |-
    例１)
    [技]Ａ
    優先度1：自分HP50％以下のとき頻度1
    [技]Ｂ
    優先度2：自分MP50％以下のとき頻度2
    [技]Ｃ
    優先度3：自分HP50％以下のとき頻度5
    
    例２)
    [技]Ａ
    優先度1：自分MP50％以下のとき頻度2
    [技]Ｂ
    優先度1：自分MP50％以下のとき頻度3
    
    例１)の設定で「自分HPとMP共に50%以下」の条件を満たしてる時は、
    技Ａは、頻度1「20％」の確率で発動する。
    技Ｂは、技Ａが発動しなかったとき「(100-20)％」に頻度2「40％」で
    つまり「(100-20)*40/100=32％」の確率で発動する。
    技Ｃは、技Ａと技Ｂが発動しなかったとき「(100-20-32)％」に頻度5「100％」で
    「(100-20-32)*100/100=48％」の確率で発動する。
    
    例２)の設定で「自分MPが50%以下」の条件を満たしてる時は、
    同じ優先度の時は処理順がランダムなので①A→B、②B→Aと判定される2通り(各50%)がある
    ①A→Bと処理されるとき
    |------技A 40%------|--------判定漏れ 60%--------|
    技Aが選択されない場合(60%)は技Bで再判定
    |-------技B 60%(36%)-------|判定漏れ 40%(24%)|
    2回目の判定漏れ＝他に判定する技設定が無いので通常攻撃になる
    ②B→Aと処理されるとき
    |-----------技B 60%-----------|---判定漏れ 40%---|
    技Bが選択されない場合(40%)は技Aで再判定
    |---技A 40%(16%)--|----判定漏れ 60%(24%)-----|
    2回目の判定漏れ＝他に判定する技設定が無いので通常攻撃になる
    ①,②はランダムで選択される(50%)ので
    技Aが選択される確率は ( 40% + 16% ) / 2 = 28%
    技Bが選択される確率は ( 36% + 60% ) / 2 = 48%
    通常攻撃が選択される確率は ( 24% + 24% ) /2 = 24%
    [全集合から引く場合: 100% - ( 28% + 48% ) = 24%]
    
    ただし上記の例においては必須装備を満たし、
    現在MPが技の消費MP以上であるとする。

- name: 戦闘構造
  caption: |-
    戦闘
    ├─非接触フェイズ
    │　├─準備ターン
    │　└─先制ターン
    └─通常フェイズ
    　　└─ターン
    　　　　├─行動
    　　　　└─追加行動

- name: イベント定義
  caption: |-
    【イベント種類】、【イベント名】、【イベント説明】と
    複数の【イベントステップ】構成される。
    
    <pre>
    [イベント種類]イベント名
    ------------------
    イベント説明
    ------------------
    
    イベントステップ（複数）
    </pre>

- name: イベント種類
  caption: |-
    通常イベント
    共通イベント
    内部イベント
    
    の３種類ある。

- name: 通常イベント
  caption: |-
    受託した段階で結果内のイベント一覧に表示される。
    「通常」を省略して表記した場合はこのイベント種類になる。

- name: 共通イベント
  caption: |-
    全プレイヤー共通に無条件で受託するイベント。
    初回登録時に受託済みのイベントがこれに属する。

- name: 内部イベント
  caption: |-
    共通イベントと同じく全プレイヤーが受託するイベント。
    ただし、街や地点到達アイテム取得などの内部処理に用いられるため
    結果内のイベント一覧には表示されない。

- name: イベント名
  caption: |-
    イベントの名前
    各イベントはイベント種類とこの名前により指定されるため
    同じイベント種類で同じイベント名は許されざる。
    イベント名にスペースと改行は用いることができない。

- name: イベント説明
  caption: |-
    結果内のイベント一覧に表示される説明。
    省略することも可能である。

- name: イベントステップ
  caption: |-
    【イベントタイミング】、【イベントコンディション】と
    複数の【イベントコンテンツ】で構成される。
    
    <pre>
    [イベントタイミング]イベントコンディション
    イベントコンテンツ（複数）
    </pre>

- name: イベントタイミング
  caption: |-
    移動後、
    
    以下未実装
    
    移動中、職業を変更する、
    装備品を作製する、アイテムを合成する、
    釣りを行う、鍵を作製する、解錠する、
    薬師の行動を行う、付加を行う、
    アイテムを使用する、戦闘終了後、

- name: 移動後
  caption: |-
    移動した後に停止したタイミング

- name: イベントコンディション
  caption: |-
    現在地、フラグ状態、
    
    以下未実装
    
    アイテム使用、アイテム所持、
    PTに竜・人形が存在する、PTに職業○○が存在する、
    技能LVが○○以上、ステータスが○○以上(以下)、
    PTが○人、日記が○文字以上、技・アビリティ所持、
    LVを満たしている、確率、戦闘に勝利・敗北・引き分け、

- name: 現在地
  caption: |-
    現在地の名称が「MAP1」で座標が「D24」のとき真、それ以外は偽
    <pre>
    現在地がMAP1 D24
    </pre>

- name: フラグ状態
  caption: |-
    フラグ名「フラグA」がオンのとき真、それ以外は偽
    <pre>
    @フラグA オン
    </pre>
    
    フラグ名「フラグA」がオフまたは未設定のとき真、それ以外は偽
    <pre>
    @フラグA オフ
    </pre>

- name: イベントコンテンツ
  caption: |-
    フラグ変更、テキスト表示、数値代入、
    イベント終了、イベントステップ終了、
    イベント追加、アイテム追加、現在地変化
    
    以下未実装
    
    戦闘予告、アイテム消滅、移動、
    ステータス変動、技能・職業・生産LV変動、
    技習得、アビリティ習得、各種ポイント変動、
    竜・人形に関する何か、装備品の効果B欄に付加、
    付加変更、PTにキャラクターを加える、
    PTを解散する、PTを結成する、
    『マップ変更』、『非表示のマップを表示』、

- name: 現在地変化
  caption: |-
    現在地が名称「洞窟」の座標「J5」に変化
    <pre>
    洞窟 J5 に移動
    </pre>

- name: アイテム追加
  caption: |-
    アイテム種類「剣」アイテム名「テスト」を追加
    <pre>
    [剣]テスト を追加
    </pre>

- name: イベント追加
  caption: |-
    イベント種類「通常イベント」イベント名「散歩」を追加
    <pre>
    [イベント]散歩 を追加
    </pre>

- name: フラグ変更
  caption: |-
    フラグ名「フラグA」がオンになる
    <pre>
    ＠フラグA オン
    </pre>
    
    フラグ名「フラグA」がオフになる
    <pre>
    ＠フラグA オフ
    </pre>

- name: 数値代入
  caption: |-
    数値名「進行度」が3になる
    <pre>
    ＠進行度 を3に
    </pre>
    
    数値名「討伐回数」が+1される
    <pre>
    ＠討伐回数 を＋1
    </pre>
    
    数値名「残り回数」が-2される
    <pre>
    ＠残り回数 を-2
    </pre>

- name: テキスト表示
  caption: |-
    「内容」が結果に表示される。
    <pre>
    ----
    内容
    ----
    </pre>

- name: イベントステップ終了
  caption: |-
    ステップの状態が終了になり
    このステップは今後発動しなくなる。
    <pre>
    このステップ終了
    </pre>

- name: イベント終了
  caption: |-
    イベントの状態が終了になる。
    イベントに含まれる全てのステップが今後発動しなくなる。
    <pre>
    このイベント終了
    </pre>

- name: イベント定義例
  caption: |-
    [共通イベント]ぱしり
    --------------------------------
    おつかいイベント。
    まずはMAP1 D24に停止してみよう。
    --------------------------------
    
    [移動後]現在地がMAP1 D24
    --------------
    MAP1 B24へ行け
    --------------
    @ぱしり先の指示受けフラグ をオン ⇒ このステップ終了
    
    [移動後]現在地がMAP1 D24 かつ @ぱしり先の指示受けフラグ オン かつ @ぱしり完了フラグ オフ かつ ＠はよ行けって言われた回数 ＜ 3
    "はやくMAP1 B24へ行け"
    ＠はよ行けって言われた回数 を＋1
    
    [移動後]現在地がMAP1 B24 かつ @ぱしり先の指示受けフラグ オン
    --------------
    MAP1 D24へ戻れ
    --------------
    @ぱしり完了フラグ をオン ⇒ このステップ終了
    
    [移動後]現在地がMAP1 D24 かつ @ぱしり完了フラグ オフ かつ ＠はよ行けって言われた回数 が3以上
    --------------
    強情な奴だな。
    --------------
    ＠強情クリアフラグ オン
    このイベント終了
    
    [移動後]現在地がMAP1 D24 かつ @ぱしり完了フラグ オン
    --------------
    イベントクリア
    --------------
    このイベント終了
